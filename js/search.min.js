!function(){var s,a=window||this,t=a.BLOG.even,e=a.BLOG.$,n=e("#search"),i=e("#search-wrap"),r=e("#key"),o=e("#search-panel"),c=e("#search-result"),l=e("#search-tpl").innerHTML,u=(a.BLOG.ROOT+"/content.json").replace(/\/{2}/g,"/");a.BLOG.noop;var p=e("html"),h={show:function(){a.innerWidth<760&&p.classList.add("lock-size"),o.classList.add("in")},hide:function(){a.innerWidth<760&&p.classList.remove("lock-size"),o.classList.remove("in")}};function f(t){var e="",e=t.length?t.map(function(t){return e=l,n={title:t.title,path:(a.BLOG.ROOT+"/"+t.path).replace(/\/{2,}/g,"/"),date:new Date(t.date).toLocaleDateString(),tags:t.tags.map(function(t){return"<span>#"+t.name+"</span>"}).join("")},e.replace(/\{\w+\}/g,function(t){t=t.replace(/\{|\}/g,"");return n[t]||""});var e,n}).join(""):'<li class="tips"><i class="icon icon-coffee icon-3x"></i><p>Results not found!</p></li>';c.innerHTML=e}function d(t,e){return e.lastIndex=0,e.test(t)}function g(t){var n,e,t=t.target.value.trim();t&&(n=new RegExp(t.replace(/[ ]/g,"|"),"gmi"),e=function(t){f(t.filter(function(t){return e=n,d((t=t).title,e)||t.tags.some(function(t){return d(t.name,e)})||d(t.text,e);var e})),h.show()},s?e(s):((t=new XMLHttpRequest).open("GET",u,!0),t.onload=function(){var t;200<=this.status&&this.status<300?(t=JSON.parse(this.response),s=t instanceof Array?t:t.posts,e(s)):console.error(this.statusText)},t.onerror=function(){console.error(this.statusText)},t.send()))}n.addEventListener(t,function(t){i.classList.toggle("in"),r.value="",i.classList.contains("in")?r.focus():r.blur(),t.preventDefault()}),document.addEventListener(t,function(t){t.target===r?g(t):function(t,e){for(var n=t.matches||t.webkitMatchesSelector||t.mozMatchesSelector||t.msMatchesSelector,s=null;t&&!n.call(t,e);)s=t=t.parentElement;return s}(t.target,".search-panel")||h.hide(),t.stopPropagation()}),r.addEventListener("input",function(t){t.target.value?g(t):h.hide()})}.call(this);